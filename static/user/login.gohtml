{{ define "login"}}
    <!DOCTYPE html>
    <html>
    {{ template "head" "User | login"}}
    <body>
    <div class="content">
        <div class="title-sub">ğŸ”’ ç™»å…¥ç³»çµ±</div>
        <form id="loginForm" method="post" action="/api/login" target="hide_iframe">
            <div class="mb-3">
                <label for="emailInput" class="form-label">éƒµç®±</label>
                <input type="email" class="form-control" id="emailInput" placeholder="name@example.com" name="email">
            </div>
            <div class="mb-3">
                <label for="passwordInput" class="form-label">å¯†ç¢¼</label>
                <input type="password" class="form-control" id="passwordInput" name="password">
            </div>
            <div>
                <button type="submit" class="btn btn-primary d-inline-block">ç™»å…¥</button>
            </div>
        </form>
        <iframe name="hide_iframe" style="display:none;"></iframe>
    </div>
    {{ template "title"}}
    {{ template "footer"}}
    <script>
        const form = $('#loginForm')
        form.submit(function (event) {
            $.ajax({
                url: form.attr('action'),
                type: 'POST',
                data: form.serialize(),
                success: function () {
                    alert("ç™»å…¥æˆåŠŸï¼Œå°‡è‡ªå‹•è·³è½‰åŸå…ˆé é¢")
                    const lastPage = $.trim(document.referrer)
                    if (lastPage) {
                        window.location.href = lastPage
                    } else {
                        window.location.href = "/"
                    }
                },
                error: function () {
                    alert("éƒµç®±æˆ–å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹æª¢æŸ¥å¾Œé‡è©¦")
                }
            });
            event.preventDefault()
            this.reset()
        });
    </script>
    </body>
    </html>
{{ end }}